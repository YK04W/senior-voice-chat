# 🎤 音声合成のアップグレード

## ✅ 完了した変更

### OpenAI TTS APIへの切り替え

従来のWeb Speech APIから、**OpenAI TTS API**に切り替えました。

### 改善点

1. **自然な人間の声**
   - ロボット音声から、人間のような自然な音声に変更
   - 感情豊かで聞き取りやすい

2. **高品質な音声モデル**
   - `tts-1-hd`: 高品質モデル（デフォルト）
   - `tts-1`: 標準モデル（低遅延）

3. **複数の音声タイプ**
   - **Nova**（女性・明るい） - デフォルト
   - **Shimmer**（女性・優しい）
   - **Alloy**（中性）
   - **Echo**（男性）
   - **Fable**（男性・温かい）
   - **Onyx**（男性・深い）

## 📋 使い方

### 音声タイプの変更

1. アプリの「⚙️ 設定」を開く
2. 「音声タイプ」セクションで選択
3. 好みの音声を選ぶ
4. 自動的に保存されます

### モデルの選択

- **高品質（tts-1-hd）**: より自然な音声（推奨）
- **標準（tts-1）**: 低遅延、軽量

## 💰 コスト

OpenAI TTS APIの価格（2025年12月時点）:
- **tts-1**: $15 / 100万文字
- **tts-1-hd**: $30 / 100万文字

### 月額コスト見積もり

- 1日10人が利用
- 1人あたり5往復の会話
- 平均応答: 50文字

```
1日: 10人 × 5往復 × 50文字 = 2,500文字
1ヶ月: 2,500文字 × 30日 = 75,000文字

コスト（tts-1-hd）:
75,000 ÷ 1,000,000 × $30 = $0.00225/月（約0.3円/月）
```

**非常に低コストです！**

## 🔄 フォールバック機能

OpenAI TTS APIが利用できない場合（APIキー未設定など）、自動的にWeb Speech APIにフォールバックします。

## 🎯 推奨設定

### シニアユーザー向け

- **音声タイプ**: Nova（女性・明るい）または Shimmer（女性・優しい）
- **モデル**: tts-1-hd（高品質）
- **速度**: 普通（0.9倍速）

### デモ用

- **音声タイプ**: Nova（明るく親しみやすい）
- **モデル**: tts-1-hd（高品質で印象的）

## 📝 技術的な詳細

### 実装内容

1. **api.js**: OpenAI TTS APIの呼び出し機能を追加
2. **speech.js**: TTS APIを使用した音声合成に変更
3. **storage.js**: TTS設定の保存機能を追加
4. **app.js**: 設定画面でのTTS設定を追加
5. **index.html**: 音声タイプ選択UIを追加

### APIエンドポイント

```
POST https://api.openai.com/v1/audio/speech
```

### パラメータ

- `model`: `tts-1` または `tts-1-hd`
- `input`: 読み上げるテキスト
- `voice`: 音声タイプ（nova, shimmer, alloy, echo, fable, onyx）
- `speed`: 速度（0.25-4.0、デフォルト1.0）

## ✅ 動作確認

デプロイ後、以下を確認してください：

1. [ ] アプリが正常に動作する
2. [ ] 音声が自然に聞こえる
3. [ ] 設定画面で音声タイプを変更できる
4. [ ] 音声が正常に再生される
5. [ ] フォールバック機能が動作する（APIキー未設定時）

## 🚀 デプロイ

変更は既にGitHubにプッシュ済みです。

GitHub Pagesが自動的に再デプロイされます（数分かかります）。

デプロイ完了後、iPhoneでアプリを開いて、新しい自然な音声をお試しください！

